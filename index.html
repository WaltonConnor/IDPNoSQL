<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IDP Front End</title>
</head>
<body>
    <h1>Static Web Apps Database Connections</h1>
    <blockquote>
        Open the console in the browser developer tools to see the API responses.
    </blockquote>
    <div>
        <button id="list" onclick="list()">List</button>
    </div>
    
    <script>
        async function list() {
            const query = `
                {
                staff {
                    items {
                        SID
                        FirstName
                        LastName
                        MobileNumber
                        HomeTelephone
                        Email
                        Address
                        City
                        Country
                        PostCode
                        EmergencyContactName
                        EmergencyContactNumber
                        JobName
                        JobSalery
                        JobHours
                        PracticeName
                        TypeOfPractice
                        PracticeAddress
                        PracticeCity
                        PracticeCountry
                        PracticePostcode
                        PracticeEmail
                        PracticePhoneNumber
                        id
                    }
                }
                }`;
            const endpoint = "/data-api/graphql";
            const response = await fetch(endpoint, { 
                method: "POST", 
                headers: { "Content-Type": "application/json" }, 
                body: JSON.stringify({ query: query }) 
            });
            const result = await response.json();
            console.table(result.data.staff.items);
            }
    </script>
</body>
</html>